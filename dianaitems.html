<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Diana Combo Calculator</title>
<style>
body { margin:0; padding:0; font-family:"Beaufort for LOL", serif; background:#0a0f1a; color:#d8c48a; text-align:center; }
header { font-size:36px; font-weight:700; padding:5px 0; letter-spacing:2px; }
header::after { content:""; display:block; width:100%; height:2px; background:#d8c48a; margin-top:10px; }
.return-btn { display:inline-block; margin:15px auto; padding:10px 24px; background:linear-gradient(135deg,#d8c48a,#f0d88b); color:#000; border-radius:6px; text-decoration:none; font-weight:bold; }
.return-btn:hover { background:linear-gradient(135deg,#f0d88b,#ffd66f); }
.container { width:85%; max-width:900px; margin:20px auto; text-align:left; }
.card { background:rgba(12,18,30,0.8); border:1px solid rgba(255,255,255,0.08); padding:16px 20px; border-radius:10px; margin-bottom:20px; }
.card label { display:block; margin-bottom:4px; font-size:16px; }
select,input[type=number] { width:100%; padding:10px; margin-bottom:12px; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background:rgba(15,22,35,0.9); color:white; font-size:16px; -webkit-appearance:none; -moz-appearance:none; appearance:none; background-image: url("data:image/svg+xml,%3Csvg fill='white' height='32' viewBox='0 0 24 24' width='32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; background-size: 24px; }
.flex-row { display:flex; gap:10px; flex-wrap:wrap; }
.flex-row select, .flex-row input { flex:1; min-width:80px; }
button { padding:12px 26px; font-size:16px; font-weight:bold; background:#2f81f7; color:#fff; border:none; border-radius:8px; cursor:pointer; margin:20px auto 15px; display:block; }
button:hover { background:#1b5fc7; }
table { width:100%; border-collapse:collapse; margin-top:10px; }
th,td { padding:12px; border-bottom:1px solid rgba(255,255,255,0.05); }
th { color:#d8c48a; font-size:16px; }
td { color:white; font-size:15px; }
footer { text-align:center; margin-top:20px; padding:15px 0; color:#8b949e; font-size:14px; }

/* Equal widths for top inputs */
.top-inputs select, .top-inputs input { width:calc(33.333% - 6.66px); }
.top-inputs { display:flex; gap:10px; margin-bottom:16px; }
.ability-grid { display:flex; gap:10px; flex-wrap:wrap; }
.ability-card { flex:1; min-width:120px; }

/* Fix dropdown arrows for all */
select::-ms-expand { display:block; }
@media(max-width:700px){ .top-inputs, .ability-grid { flex-direction:column; } }
</style>
</head>
<body>

<header>DIANA COMBO CALCULATOR</header>

<a class="return-btn" href="membershub.html">BACK TO MEMBERS HUB</a>

<div class="container">

<!-- Diana & Enemy Info -->
<div class="card top-inputs">
  <select id="diana-level"></select>
  <input type="number" id="enemy-hp" value="1000" placeholder="Enemy HP">
  <input type="number" id="enemy-mr" value="30" placeholder="Enemy MR">
</div>

<!-- Items -->
<div class="card">
  <label>AP Items (6 slots)</label>
  <div class="flex-row">
    <select id="item-1"></select>
    <select id="item-2"></select>
    <select id="item-3"></select>
  </div>
  <div class="flex-row">
    <select id="item-4"></select>
    <select id="item-5"></select>
    <select id="item-6"></select>
  </div>
</div>

<!-- Item Stats -->
<div class="card" id="item-stats">
  <strong>Item Stats:</strong>
  <p>Total AP: <span id="total-ap">0</span></p>
  <p>Flat Pen: <span id="total-flat-pen">0</span></p>
  <p>% Pen: <span id="total-perc-pen">0%</span></p>
</div>

<!-- Ability Grid -->
<div class="card">
  <label>Ability Rank & Uses</label>
  <div class="ability-grid">
    <div class="ability-card">
      <label>Q Rank</label>
      <select id="q-rank"></select>
      <label>Uses</label>
      <input type="number" id="q-count" value="1" min="1">
    </div>
    <div class="ability-card">
      <label>W Rank</label>
      <select id="w-rank"></select>
      <label>Uses</label>
      <input type="number" id="w-count" value="1" min="1">
    </div>
    <div class="ability-card">
      <label>E Rank</label>
      <select id="e-rank"></select>
      <label>Uses</label>
      <input type="number" id="e-count" value="1" min="1">
    </div>
    <div class="ability-card">
      <label>R Rank</label>
      <select id="r-rank"></select>
      <label>Uses</label>
      <input type="number" id="r-count" value="1" min="1">
    </div>
    <div class="ability-card">
      <label>Passive Uses</label>
      <input type="number" id="passive-count" value="1" min="1">
    </div>
  </div>
</div>

<button id="calculate-btn">Calculate Combo Damage</button>

<!-- Damage Table -->
<div class="card">
  <table>
    <thead>
      <tr><th>Ability</th><th>Total Damage</th><th>Damage Type</th></tr>
    </thead>
    <tbody id="damage-table">
      <tr><td>—</td><td>—</td><td>—</td></tr>
      <tr><td>—</td><td>—</td><td>—</td></tr>
      <tr><td>—</td><td>—</td><td>—</td></tr>
      <tr><td>—</td><td>—</td><td>—</td></tr>
      <tr><td>—</td><td>—</td><td>—</td></tr>
    </tbody>
  </table>
</div>

</div>

<footer>© 2025 LoL Fundamentals · All rights reserved</footer>

<script>
// --- Item & Ability Data ---
const AP_ITEMS = [
  {name:"Doran's Ring", ap:18, flatPen:0, percPen:0},
  {name:"Amplifying Tome", ap:20, flatPen:0, percPen:0},
  {name:"Lost Chapter", ap:40, flatPen:0, percPen:0},
  {name:"Needlessly Large Rod", ap:65, flatPen:0, percPen:0},
  {name:"Fiendish Codex", ap:30, flatPen:0, percPen:0},
  {name:"Blasting Wand", ap:40, flatPen:0, percPen:0},
  {name:"Hextech Rocketbelt", ap:90, flatPen:0, percPen:0},
  {name:"Luden's Tempest", ap:120, flatPen:0, percPen:0},
  {name:"Shadowflame", ap:100, flatPen:15, percPen:0},
  {name:"Rabadon's Deathcap", ap:150, flatPen:0, percPen:0},
  {name:"Void Staff", ap:90, flatPen:0, percPen:0.4},
  {name:"Horizon Focus", ap:100, flatPen:0, percPen:0},
  {name:"Liandry's Anguish", ap:90, flatPen:0, percPen:0},
  {name:"Demonic Embrace", ap:80, flatPen:0, percPen:0},
  {name:"Morellonomicon", ap:70, flatPen:0, percPen:0},
  {name:"Cryptbloom", ap:80, flatPen:0, percPen:0.3},
  {name:"Stormsurge", ap:80, flatPen:15, percPen:0},
  {name:"Bloodletter's Curse", ap:60, flatPen:10, percPen:0.1},
  {name:"Dark Seal", ap:15, flatPen:0, percPen:0},
  {name:"Mejai's Soulstealer", ap:20, flatPen:0, percPen:0}
];

const Q_BASE=[70,105,140,175,210], Q_RATIO=0.7;
const W_BASE=[60,96,132,168,204], W_RATIO=0.54;
const E_BASE=[50,70,90,110,130], E_RATIO=0.6;
const R_BASE=[200,300,400], R_RATIO=0.6;

function populateItems() {
  for(let i=1;i<=6;i++){
    const select=document.getElementById(`item-${i}`);
    select.innerHTML="";
    const emptyOption = document.createElement("option"); emptyOption.value=""; emptyOption.textContent=""; select.appendChild(emptyOption);
    AP_ITEMS.forEach((it, idx)=>{ const o=document.createElement("option"); o.value=idx; o.textContent=it.name; select.appendChild(o); });
    if(i===1) select.value=0; else select.value="";
    select.addEventListener("change",updateItemStats);
  }
}

function populateLevels(){
  const lvl=document.getElementById("diana-level");
  for(let i=1;i<=18;i++){ const o=document.createElement("option"); o.value=i; o.textContent=i; lvl.appendChild(o); }
  lvl.value=1;
}

// Populate ability ranks
function populateAbilityRanks(){
  const q=document.getElementById("q-rank"); const w=document.getElementById("w-rank");
  const e=document.getElementById("e-rank"); const r=document.getElementById("r-rank");
  for(let i=1;i<=5;i++){ q.appendChild(new Option(i,i)); w.appendChild(new Option(i,i)); e.appendChild(new Option(i,i)); }
  for(let i=1;i<=3;i++){ r.appendChild(new Option(i,i)); }
}

function getItemStats(){
  let totalAP=0, flatPen=0, percPen=0;
  for(let i=1;i<=6;i++){
    const idx = document.getElementById(`item-${i}`).value;
    if(idx==="") continue;
    const item = AP_ITEMS[parseInt(idx)] || {ap:0, flatPen:0, percPen:0};
    totalAP+=item.ap; flatPen+=item.flatPen; percPen+=item.percPen;
  }
  return {totalAP, flatPen, percPen};
}
function updateItemStats(){
  const {totalAP, flatPen, percPen} = getItemStats();
  document.getElementById("total-ap").textContent=totalAP;
  document.getElementById("total-flat-pen").textContent=flatPen;
  document.getElementById("total-perc-pen").textContent=Math.round(percPen*100)+"%";
}

function getPassiveBase(level){ return Math.round(20 + (220-20)*(level-1)/17); }

function calcDamage(base, ratio, ap, mr, count, flatPen, percPen){
  let raw=(base+ratio*ap)*count;
  let effectiveMR=mr-flatPen; if(effectiveMR<0) effectiveMR=0;
  effectiveMR*=1-percPen;
  return Math.round(raw*100/(100+effectiveMR));
}

function calculateCombo(){
  const level=parseInt(document.getElementById("diana-level").value);
  const mr=parseFloat(document.getElementById("enemy-mr").value)||30;

  const passiveCount=parseInt(document.getElementById("passive-count").value)||0;
  const qRank=parseInt(document.getElementById("q-rank").value)||1;
  const wRank=parseInt(document.getElementById("w-rank").value)||1;
  const eRank=parseInt(document.getElementById("e-rank").value)||1;
  const rRank=parseInt(document.getElementById("r-rank").value)||1;

  const qCount=parseInt(document.getElementById("q-count").value)||1;
  const wCount=parseInt(document.getElementById("w-count").value)||1;
  const eCount=parseInt(document.getElementById("e-count").value)||1;
  const rCount=parseInt(document.getElementById("r-count").value)||1;

  const {totalAP, flatPen, percPen}=getItemStats();
  updateItemStats();

  const abilities=[
    {name:"Passive", base:getPassiveBase(level), ratio:0.5, count:passiveCount},
    {name:"Q", base:Q_BASE[qRank-1]||Q_BASE[0], ratio:Q_RATIO, count:qCount},
    {name:"W", base:W_BASE[wRank-1]||W_BASE[0], ratio:W_RATIO, count:wCount},
    {name:"E", base:E_BASE[eRank-1]||E_BASE[0], ratio:E_RATIO, count:eCount},
    {name:"R", base:R_BASE[rRank-1]||R_BASE[0], ratio:R_RATIO, count:rCount}
  ];

  const tbody=document.getElementById("damage-table");
  tbody.innerHTML="";
  abilities.forEach(ab=>{
    const dmg=calcDamage(ab.base, ab.ratio, totalAP, mr, ab.count, flatPen, percPen);
    const row=document.createElement("tr");
    row.innerHTML=`<td>${ab.name}</td><td>${dmg}</td><td>Magic</td>`;
    tbody.appendChild(row);
  });
}

document.addEventListener("DOMContentLoaded",()=>{
  populateItems();
  populateLevels();
  populateAbilityRanks();
  updateItemStats();
  document.getElementById("calculate-btn").addEventListener("click",calculateCombo);
});
</script>
</body>
</html>













