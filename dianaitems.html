<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diana Combo Calculator</title>
<style>
body {
  margin: 0;
  padding: 0;
  font-family: "Beaufort for LOL", serif;
  background: #0a0f1a;
  color: #d8c48a;
  text-align: center;
}
header {
  font-size: 36px;
  font-weight: 700;
  padding: 5px 0;
  letter-spacing: 2px;
}
header::after {
  content: "";
  display: block;
  width: 100%;
  height: 2px;
  background: #d8c48a;
  margin-top: 10px;
}
.return-btn {
  display: inline-block;
  margin: 10px auto 20px;
  padding: 10px 24px;
  background: linear-gradient(135deg, #d8c48a, #f0d88b);
  color: #000;
  border-radius: 6px;
  text-decoration: none;
  font-weight: bold;
}
.return-btn:hover {
  background: linear-gradient(135deg, #f0d88b, #ffd66f);
}
.container {
  width: 90%;
  max-width: 900px;
  margin: 0 auto 20px;
}
.card {
  background: rgba(12,18,30,0.8);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 16px 20px;
  border-radius: 10px;
  text-align: left;
  margin-bottom: 20px;
}
.card label {
  display: block;
  margin-bottom: 6px;
  font-size: 16px;
}
input[type=number], select {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(15,22,35,0.9);
  color: white;
  font-size: 16px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  text-indent: 0.01px;
  text-overflow: '';
  background-image: url("data:image/svg+xml,%3Csvg fill='white' height='32' viewBox='0 0 24 24' width='32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 24px;
  width: 100%;
  box-sizing: border-box;
}
.top-row {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}
.top-row .top-item {
  flex: 1 1 30%;
  min-width: 120px;
}

/* Ability section */
.ability-card {
  margin-bottom: 20px;
}
.ability-row {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
  gap: 10px;
}
.ability-row .first-line {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex: 2;
  margin-right: 8px; /* mobile spacing fix */
}
.ability-row select.rank-select, .ability-row select.uses-select {
  width: 60px;
}
button#calculate-btn {
  padding: 12px 26px;
  font-size: 16px;
  font-weight: bold;
  background: #2f81f7;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  margin-bottom: 20px;
}
button#calculate-btn:hover {
  background: #1b5fc7;
}
table {
  width: 100%;
  border-collapse: collapse;
}
th, td {
  padding: 12px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
th { color: #d8c48a; font-size: 16px; }
td { color: white; font-size: 15px; }
#total-damage { font-size: 18px; font-weight: bold; color: #ffd700; }
footer { text-align: center; margin-top: 20px; padding: 15px 0; color: #8b949e; font-size: 14px; }

/* Items grid */
.items-grid {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.items-grid select {
  flex: 1 1 30%;
  min-width: 100px;
}

/* Item stats in white */
#item-stats p span { color: white; }

/* Responsive */
@media(max-width:600px){
  .top-row .top-item {
    flex: 1 1 100%;
  }
  .ability-row {
    flex-direction: column;
    align-items: flex-start;
  }
  .ability-row select.rank-select, .ability-row select.uses-select {
    width: 100%;
    margin-top: 4px;
  }
}
</style>
</head>
<body>

<header>DIANA COMBO CALCULATOR</header>
<a class="return-btn" href="membershub.html">BACK TO MEMBERS HUB</a>

<div class="container">

<!-- Top Inputs (Enemy stats) -->
<div class="card">
<div class="top-row">
  <div class="top-item">
    <label>Enemy HP</label>
    <input type="number" id="enemy-hp" value="1000">
  </div>
  <div class="top-item">
    <label>Enemy Armor</label>
    <input type="number" id="enemy-armor" value="30">
  </div>
  <div class="top-item">
    <label>Enemy MR</label>
    <input type="number" id="enemy-mr" value="30">
  </div>
</div>
</div>

<!-- Items -->
<div class="card">
<label>AP Items (6 slots)</label>
<div class="items-grid">
  <select id="item-1"></select>
  <select id="item-2"></select>
  <select id="item-3"></select>
  <select id="item-4"></select>
  <select id="item-5"></select>
  <select id="item-6"></select>
</div>
</div>

<div class="card" id="item-stats">
<strong>Item Stats:</strong>
<p>Total AP: <span id="total-ap">0</span></p>
<p>Flat Pen: <span id="total-flat-pen">0</span></p>
<p>% Pen: <span id="total-perc-pen">0%</span></p>
</div>

<!-- Diana Level -->
<div class="card">
<label>Diana Level</label>
<select id="diana-level"></select>
</div>

<!-- Ability Section -->
<div class="card ability-card">
<label>Ability Usage</label>

<div class="ability-row">
  <div class="first-line"><span>Auto Attack</span></div>
  <select class="uses-select" id="aa-count"></select>
</div>

<div class="ability-row">
  <div class="first-line"><span>Passive</span></div>
  <select class="uses-select" id="passive-count"></select>
</div>

<div class="ability-row">
  <div class="first-line"><span>Q Rank</span>
    <select class="rank-select" id="q-rank"></select>
  </div>
  <select class="uses-select" id="q-count"></select>
</div>

<div class="ability-row">
  <div class="first-line"><span>W Rank</span>
    <select class="rank-select" id="w-rank"></select>
  </div>
  <select class="uses-select" id="w-count"></select>
</div>

<div class="ability-row">
  <div class="first-line"><span>E Rank</span>
    <select class="rank-select" id="e-rank"></select>
  </div>
  <select class="uses-select" id="e-count"></select>
</div>

<div class="ability-row">
  <div class="first-line"><span>R Rank</span>
    <select class="rank-select" id="r-rank"></select>
  </div>
  <select class="uses-select" id="r-count"></select>
</div>

</div>

<button id="calculate-btn">Calculate Combo Damage</button>

<div class="card">
<table>
<thead>
<tr><th>Ability</th><th>Damage</th><th>Damage Type</th></tr>
</thead>
<tbody id="damage-table">
<tr><td>Auto Attack</td><td>—</td><td id="aa-type">Physical</td></tr>
<tr><td>Passive</td><td>—</td><td id="passive-type">Magic</td></tr>
<tr><td>Q</td><td>—</td><td id="q-type">Magic</td></tr>
<tr><td>W</td><td>—</td><td id="w-type">Magic</td></tr>
<tr><td>E</td><td>—</td><td id="e-type">Magic</td></tr>
<tr><td>R</td><td>—</td><td id="r-type">Magic</td></tr>
<tr><td><strong>Total Damage</strong></td><td id="total-damage">—</td><td id="total-types">Physical/Magic</td></tr>
</tbody>
</table>
</div>

</div>

<footer>© 2025 LoL Fundamentals · All rights reserved</footer>

<script>
const AP_ITEMS = [
{name:"Doran's Ring", ap:18, flatPen:0, percPen:0},
{name:"Amplifying Tome", ap:20, flatPen:0, percPen:0},
{name:"Lost Chapter", ap:40, flatPen:0, percPen:0},
{name:"Needlessly Large Rod", ap:65, flatPen:0, percPen:0},
{name:"Fiendish Codex", ap:30, flatPen:0, percPen:0},
{name:"Blasting Wand", ap:40, flatPen:0, percPen:0},
{name:"Hextech Rocketbelt", ap:90, flatPen:0, percPen:0},
{name:"Luden's Tempest", ap:120, flatPen:0, percPen:0},
{name:"Shadowflame", ap:100, flatPen:15, percPen:0},
{name:"Rabadon's Deathcap", ap:130, flatPen:0, percPen:0, multiplier:0.3},
{name:"Void Staff", ap:90, flatPen:0, percPen:0.4},
{name:"Horizon Focus", ap:125, flatPen:0, percPen:0},
{name:"Liandry's Anguish", ap:90, flatPen:0, percPen:0},
{name:"Demonic Embrace", ap:80, flatPen:0, percPen:0},
{name:"Morellonomicon", ap:70, flatPen:0, percPen:0},
{name:"Cryptbloom", ap:80, flatPen:0, percPen:0.3},
{name:"Stormsurge", ap:90, flatPen:15, percPen:0},
{name:"Bloodletter's Curse", ap:60, flatPen:10, percPen:0.1},
{name:"Dark Seal", ap:15, flatPen:0, percPen:0},
{name:"Mejai's Soulstealer", ap:20, flatPen:0, percPen:0},
{name:"Nashor's Tooth", ap:80, flatPen:0, percPen:0},
{name:"Lich Bane", ap:100, flatPen:0, percPen:0}
];

function populateItems() {
  for(let i=1;i<=6;i++){
    const select=document.getElementById(`item-${i}`);
    select.innerHTML="";
    const emptyOpt=document.createElement("option");
    emptyOpt.value="";
    emptyOpt.textContent="";
    select.appendChild(emptyOpt);

    AP_ITEMS.forEach((it,idx)=>{
      const o=document.createElement("option");
      o.value=idx;
      o.textContent=it.name;
      select.appendChild(o);
    });

    if(i===1) select.value=0;
    select.addEventListener("change",updateItemStats);
  }
}

function populateLevels() {
  const lvl=document.getElementById("diana-level");
  for(let i=1;i<=18;i++){
    const o=document.createElement("option");
    o.value=i;
    o.textContent=i;
    lvl.appendChild(o);
  }
  lvl.value=1;
}

function populateUsesDropdowns() {
  const ids = ["aa-count","passive-count","q-count","w-count","e-count","r-count"];
  ids.forEach(id=>{
    const sel=document.getElementById(id);
    for(let i=0;i<=10;i++){
      const o=document.createElement("option");
      o.value=i; o.textContent=i;
      sel.appendChild(o);
    }
    sel.value=0;
  });
}

function populateRanksDropdowns() {
  const rankMap = {
    "q-rank":5, "w-rank":5, "e-rank":5, "r-rank":3
  };
  for(const id in rankMap){
    const max=rankMap[id];
    const sel=document.getElementById(id);
    sel.innerHTML="";
    for(let i=0;i<=max;i++){
      const o=document.createElement("option");
      o.value=i; o.textContent=i;
      sel.appendChild(o);
    }
    sel.value=0;
  }
}

function getItemStats(){
  let totalAP=0, flatPen=0, percPen=0;
  let multiplier=0;
  for(let i=1;i<=6;i++){
    const idx=document.getElementById(`item-${i}`).value;
    if(idx==="") continue;
    const item=AP_ITEMS[parseInt(idx)];
    totalAP+=item.ap;
    flatPen+=item.flatPen;
    percPen+=item.percPen;
    if(item.multiplier) multiplier+=item.multiplier;
  }
  totalAP = Math.round(totalAP*(1+multiplier));
  return {totalAP, flatPen, percPen};
}
function updateItemStats(){
  const {totalAP, flatPen, percPen}=getItemStats();
  document.getElementById("total-ap").textContent=totalAP;
  document.getElementById("total-flat-pen").textContent=flatPen;
  document.getElementById("total-perc-pen").textContent=Math.round(percPen*100)+"%";
}

function getPassiveBase(level){ return Math.round(20 + (220-20)*(level-1)/17); }
function getAutoAttackBase(level){ return Math.round(57 + (108-57)*(level-1)/17); }

const Q_BASE=[0,70,105,140,175,210], Q_RATIO=0.7;
const W_BASE=[0,60,96,132,168,204], W_RATIO=0.54;
const E_BASE=[0,50,70,90,110,130], E_RATIO=0.6;
const R_BASE=[0,200,300,400], R_RATIO=0.6;

function calcMagicDamage(base, ratio, ap, mr, count, flatPen, percPen){
  if(base===0 || count===0) return 0;
  let raw=(base+ratio*ap)*count;
  let effectiveMR=mr-flatPen;
  if(effectiveMR<0) effectiveMR=0;
  effectiveMR*=1-percPen;
  return Math.round(raw*100/(100+effectiveMR));
}

function calcPhysicalDamage(base, count, armor){
  if(base===0 || count===0) return 0;
  return Math.round(base * count * 100 / (100 + armor));
}

function calculateCombo(){
  const level=parseInt(document.getElementById("diana-level").value);
  const mr=parseFloat(document.getElementById("enemy-mr").value)||30;
  const armor=parseFloat(document.getElementById("enemy-armor").value)||30;

  const {totalAP,flatPen,percPen}=getItemStats();
  updateItemStats();

  const abilities=[
    {name:"Auto Attack", base:getAutoAttackBase(level), ratio:0, count:parseInt(document.getElementById("aa-count").value)||0, type:"Physical"},
    {name:"Passive", base:getPassiveBase(level), ratio:0.5, count:parseInt(document.getElementById("passive-count").value)||0, type:"Magic"},
    {name:"Q", base:Q_BASE[parseInt(document.getElementById("q-rank").value)], ratio:Q_RATIO, count:parseInt(document.getElementById("q-count").value)||0, type:"Magic"},
    {name:"W", base:W_BASE[parseInt(document.getElementById("w-rank").value)], ratio:W_RATIO, count:parseInt(document.getElementById("w-count").value)||0, type:"Magic"},
    {name:"E", base:E_BASE[parseInt(document.getElementById("e-rank").value)], ratio:E_RATIO, count:parseInt(document.getElementById("e-count").value)||0, type:"Magic"},
    {name:"R", base:R_BASE[parseInt(document.getElementById("r-rank").value)], ratio:R_RATIO, count:parseInt(document.getElementById("r-count").value)||0, type:"Magic"}
  ];

  const rows=document.querySelectorAll("#damage-table tr");
  let totalPhysical=0;
  let totalMagic=0;

  abilities.forEach((ab,i)=>{
    let dmg;
    if(ab.type==="Magic"){
      dmg = calcMagicDamage(ab.base, ab.ratio, totalAP, mr, ab.count, flatPen, percPen);
      totalMagic+=dmg;
    } else {
      dmg = calcPhysicalDamage(ab.base, ab.count, armor);
      totalPhysical+=dmg;
    }
    rows[i].cells[1].textContent=dmg;
  });

  document.getElementById("total-damage").textContent = totalPhysical + totalMagic;
  document.getElementById("total-types").textContent = `Physical: ${totalPhysical} / Magic: ${totalMagic}`;
}

document.addEventListener("DOMContentLoaded",()=>{
  populateItems();
  populateLevels();
  populateUsesDropdowns();
  populateRanksDropdowns();
  updateItemStats();
  document.getElementById("calculate-btn").addEventListener("click",calculateCombo);
});
</script>
</body>
</html>





