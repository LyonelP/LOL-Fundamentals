<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Diana Rune Calculator</title>
<style>
body {
  margin: 0;
  font-family: 'Beaufort for LOL', Arial, Helvetica, sans-serif;
  text-align: center;
  color: #fff;
  background: #0a0f14;
}
header {
  background: #0d1117;
  border-bottom: 2px solid #c9aa71;
  padding: 20px;
  font-weight: bold;
  font-size: 26px;
  text-transform: uppercase;
  color: #c9aa71;
}
.back-button {
  display: inline-block;
  margin: 15px auto;
  padding: 10px 20px;
  background: linear-gradient(135deg, #c9aa71, #e0c77b);
  color: #000;
  text-decoration: none;
  border-radius: 8px;
  font-weight: bold;
  box-shadow: 0 0 10px rgba(201,170,113,0.5);
}
.back-button::before { content: "← "; }
.back-button:hover {
  background: linear-gradient(135deg, #e6c97f, #f0d88b);
  box-shadow: 0 0 15px rgba(255,215,0,0.8);
}
.calc-container {
  margin: 20px auto 50px auto;
  max-width: 650px;
  background: #0d1117;
  border: 2px solid #2f81f7;
  border-radius: 12px;
  padding: 20px;
  text-align: left;
}
.section-title {
  color: #c9aa71;
  margin-bottom: 10px;
  font-size: 20px;
  text-transform: uppercase;
}
.rune-tree {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 18px;
}
.rune-column {
  background: #141923;
  border: 1px solid #2f81f7;
  border-radius: 8px;
  padding: 12px;
}
.rune-column select, .stats-box input {
  width: 100%;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #222;
  background: #0f1722;
  color: #fff;
  margin-bottom: 8px;
}
.stats-box {
  background: #141923;
  border: 1px solid #2f81f7;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
}
.calculate-btn {
  display: block;
  margin: 20px auto;
  padding: 12px 25px;
  font-size: 18px;
  font-weight: bold;
  background: #2f81f7;
  border: none;
  color: #fff;
  border-radius: 8px;
  cursor: pointer;
}
.calculate-btn:hover { background: #1b5fc7; }
.results-box {
  margin-top: 18px;
  background: #141923;
  border: 1px solid #c9aa71;
  padding: 15px;
  border-radius: 10px;
}
.results-box table { width: 100%; border-collapse: collapse; }
.results-box th, .results-box td { padding:6px; text-align:left; border-bottom: 1px solid rgba(255,255,255,0.03); font-size:14px; }
.results-box th { color:#c9aa71; font-weight:600; }
footer {
  text-align:center;
  padding:15px 10px;
  font-size:14px;
  color:#8b949e;
  margin-top:20px;
}
</style>
</head>
<body>
<header>Diana Rune Calculator</header>
<a href="membershub.html" class="back-button">Return to Members Hub</a>

<div class="calc-container">

  <div class="section-title">Diana Level</div>
  <div class="stats-box">
    <label>Level<br><input type="number" id="diana-level" value="1" min="1" max="18"></label>
  </div>

  <div class="section-title">Enemy Stats</div>
  <div class="stats-box">
    <label>HP<br><input type="number" id="enemy-hp" value="2000"></label>
    <label>Armor<br><input type="number" id="enemy-armor" value="80"></label>
    <label>Magic Resist<br><input type="number" id="enemy-mr" value="60"></label>
  </div>

  <div class="section-title">Runes</div>
  <div class="rune-tree">
    <div class="rune-column">
      <div style="font-weight:700; margin-bottom:8px;">Primary Path</div>
      <select id="primary-path"></select>
      <select id="primary-slot-1"></select>
      <select id="primary-slot-2"></select>
      <select id="primary-slot-3"></select>
      <select id="primary-slot-4"></select>
    </div>
    <div class="rune-column">
      <div style="font-weight:700; margin-bottom:8px;">Secondary Path</div>
      <select id="secondary-path"></select>
      <select id="secondary-slot-1"></select>
      <select id="secondary-slot-2"></select>
    </div>
  </div>

  <button class="calculate-btn" id="calculate-btn">Calculate Rune Damage</button>

  <div class="results-box" id="results-box">
    <h3>Rune Damage Breakdown</h3>
    <table>
      <thead>
        <tr><th>Rune</th><th>Damage</th></tr>
      </thead>
      <tbody id="runes-table">
        <tr><td>—</td><td>—</td></tr>
      </tbody>
    </table>
    <p id="damage-total" style="margin-top:12px; font-weight:bold;"></p>
  </div>
</div>

<footer>© 2025 LoL Fundamentals · All rights reserved</footer>

<script>
const RUNES_URL = 'https://ddragon.leagueoflegends.com/cdn/14.21.1/data/en_US/runesReforged.json';
let runeTrees = [];

async function loadRunes() {
  const res = await fetch(RUNES_URL);
  runeTrees = await res.json();

  const primary = document.getElementById('primary-path');
  const secondary = document.getElementById('secondary-path');

  primary.innerHTML = '<option value="">Select Primary Path</option>';
  secondary.innerHTML = '<option value="">Select Secondary Path</option>';

  runeTrees.forEach(tree => {
    const opt1 = document.createElement('option');
    opt1.value = tree.id; opt1.textContent = tree.name;
    primary.appendChild(opt1);
    const opt2 = document.createElement('option');
    opt2.value = tree.id; opt2.textContent = tree.name;
    secondary.appendChild(opt2);
  });

  primary.addEventListener('change', () => populateSlots('primary'));
  secondary.addEventListener('change', () => populateSlots('secondary'));

  if (runeTrees.length) {
    primary.selectedIndex = 1;
    populateSlots('primary');
    secondary.selectedIndex = 2 < runeTrees.length ? 2 : 1;
    populateSlots('secondary');
  }
}

function populateSlots(type) {
  const pathId = document.getElementById(type+'-path').value;
  const tree = runeTrees.find(t => String(t.id) === pathId);
  if (!tree) return;

  if (type === 'primary') {
    for (let i=0;i<4;i++){
      const sel = document.getElementById('primary-slot-'+(i+1));
      sel.innerHTML = '<option value="">—</option>';
      (tree.slots[i]?.runes||[]).forEach(r=>{
        const o=document.createElement('option'); o.value=r.id; o.textContent=r.name; sel.appendChild(o);
      });
    }
  } else {
    const allRunes = tree.slots.flatMap(s=>s.runes||[]);
    for(let i=0;i<2;i++){
      const sel = document.getElementById('secondary-slot-'+(i+1));
      sel.innerHTML = '<option value="">—</option>';
      allRunes.forEach(r=>{
        const o=document.createElement('option'); o.value=r.id; o.textContent=r.name; sel.appendChild(o);
      });
    }
  }
}

function calculateRuneDamage() {
  const slots=[
    'primary-slot-1','primary-slot-2','primary-slot-3','primary-slot-4',
    'secondary-slot-1','secondary-slot-2'
  ];
  const level = Number(document.getElementById('diana-level').value)||1;
  const enemyMR = Number(document.getElementById('enemy-mr').value)||0;

  const tbody = document.getElementById('runes-table');
  tbody.innerHTML = '';
  let totalDamage = 0;

  slots.forEach(id=>{
    const sel = document.getElementById(id);
    let runeName='—';
    let dmg = 0;
    if(sel.value){
      for(const tree of runeTrees){
        for(const slot of tree.slots){
          const r=(slot.runes||[]).find(x=>String(x.id)===String(sel.value));
          if(r){runeName=r.name; break;}
        }
        if(runeName!=='—') break;
      }
      // Placeholder: each Adaptive Force rune deals 0.5*level*10 AP magic damage
      if(runeName.toLowerCase().includes('adaptive force')) dmg = 0.5*level*10;
      // Apply MR
      dmg = Math.round(dmg * 100 / (100 + enemyMR));
      totalDamage += dmg;
    }
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${runeName}</td><td>${dmg}</td>`;
    tbody.appendChild(tr);
  });

  document.getElementById('damage-total').textContent = `Total Estimated Damage: ${totalDamage}`;
}

document.getElementById('calculate-btn').addEventListener('click', calculateRuneDamage);
loadRunes();
</script>
</body>
</html>




