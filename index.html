<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LoL Fundamentals – The Ultimate Diana & Ekko Guide</title>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<style>
/* ...keep all your existing CSS exactly as-is... */
</style>
</head>
<body>
<header>LoL Fundamentals</header>
<section class="hero">
  <div class="blueOverlay"></div>
  <div class="particles"></div>
  <div class="aura"></div>
  <h1>The Ultimate League Guide</h1>
  <p>Master every aspect of League of Legends with champions like Diana and Ekko. Learn precise combos, matchup strategies, and advanced tips to elevate your gameplay.</p>
  <div style="margin-top:20px;">
    <button class="btn" id="signupHeroBtn">Sign Up</button>
    <button class="btn" id="loginHeroBtn" style="margin-left:10px;">Login</button>
  </div>
</section>

<!-- Signup Modal -->
<div id="signupModal" class="modal">
  <div class="modalContent">
    <h2>Create Account</h2>
    <input type="email" id="signupEmail" placeholder="Enter your email"/>
    <input type="password" id="signupPassword" placeholder="Enter your password"/>
    <input type="password" id="signupPasswordConfirm" placeholder="Confirm your password"/>
    <div style="display:flex;justify-content:center;gap:15px;margin-top:10px;">
      <button class="btn" id="continueSignupBtn">Continue</button>
      <button class="btn" id="seePlansBtn">See Plans</button>
    </div>
    <button id="closeSignupModal">Cancel</button>
  </div>
</div>

<!-- Plan Modal -->
<div id="planModal" class="modal">
  <div class="modalContent">
    <h2>Choose Your Plan</h2>
    <div class="plan-buttons">
      <button class="btn" id="yearlyBtn">$49 / Year</button>
      <div style="position:relative;display:inline-block;text-align:center">
        <div class="bestValueTag">Best Value</div>
        <button class="btn orangeBtn" id="lifetimeBtn">$139 / Lifetime</button>
      </div>
    </div>
    <button id="closePlanModal">Cancel</button>
  </div>
</div>

<!-- Login Modal -->
<div id="loginModal" class="modal">
  <div class="modalContent">
    <h2>Member Login</h2>
    <input type="email" id="loginEmail" placeholder="Enter your email"/>
    <input type="password" id="loginPassword" placeholder="Enter your password"/>
    <button class="btn" id="modalLoginBtn">Login</button>
    <button id="closeLoginModal">Cancel</button>
    <p><a href="#" id="resetLinkModal" style="color:white;">Forgot your password?</a></p>
    <p id="loginMsgModal"></p>
  </div>
</div>

<section class="section">
  <h2>What You’ll Learn</h2>
  <div class="cards">
    <!-- ...cards remain unchanged... -->
  </div>
</section>

<footer>© 2025 LoL Fundamentals · Contact: <a href="mailto:arcsecond@lolfundamentals.com">arcsecond@lolfundamentals.com</a></footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, setDoc, serverTimestamp, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyCFRcEV7wdivqONnkjJubAZOjPMixrHMBI",
  authDomain:"lol-fundamentals.firebaseapp.com",
  projectId:"lol-fundamentals",
  storageBucket:"lol-fundamentals.firebasestorage.app",
  messagingSenderId:"1038440427584",
  appId:"1:1038440427584:web:a82207151fd370dbedefa5"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const firestore = getFirestore(app);
const $ = id => document.getElementById(id);

const stripe = {
  yearly:"https://buy.stripe.com/cNi14g3nC48AerQ9cmejK07",
  lifetime:"https://buy.stripe.com/14AeV61fubB2dnMfAKejK0e"
};

// Cache modal elements
["signupHeroBtn","loginHeroBtn","closeSignupModal","closePlanModal","closeLoginModal","continueSignupBtn","seePlansBtn","yearlyBtn","lifetimeBtn","modalLoginBtn","resetLinkModal"].forEach(id => window[$(id).id] = $(`#${id}`));

// Modal handlers
signupHeroBtn.onclick = () => signupModal.style.display = "flex";
loginHeroBtn.onclick = () => loginModal.style.display = "flex";
closeSignupModal.onclick = () => signupModal.style.display = "none";
closePlanModal.onclick = () => planModal.style.display = "none";
closeLoginModal.onclick = () => loginModal.style.display = "none";

// Signup logic
continueSignupBtn.onclick = async () => {
  const email = signupEmail.value.trim();
  const pass = signupPassword.value.trim();
  const confirm = signupPasswordConfirm.value.trim();
  if(!email || !pass || !confirm) return alert("Fill all fields");
  if(pass !== confirm) return alert("Passwords do not match");

  try {
    await createUserWithEmailAndPassword(auth,email,pass);
    // Ensure Firestore doc exists
    const userRef = doc(firestore,"paidUsers",email);
    const docSnap = await getDoc(userRef);
    if(!docSnap.exists()){
      await setDoc(userRef,{paid:false,timestamp:serverTimestamp()});
    }
    signupModal.style.display = "none";
    planModal.style.display = "flex";
  } catch(err){ alert(err.message) }
};

seePlansBtn.onclick = () => { signupModal.style.display="none"; planModal.style.display="flex"; };

// Stripe buttons
yearlyBtn.onclick = () => { window.open(stripe.yearly,"_blank"); planModal.style.display="none"; };
lifetimeBtn.onclick = () => { window.open(stripe.lifetime,"_blank"); planModal.style.display="none"; };

// Login logic
modalLoginBtn.onclick = async () => {
  const email = loginEmail.value.trim();
  const pass = loginPassword.value.trim();
  if(!email || !pass){ loginMsgModal.textContent="Enter email and password"; return; }

  try {
    await signInWithEmailAndPassword(auth,email,pass);
    const userRef = doc(firestore,"paidUsers",email);
    const docSnap = await getDoc(userRef);
    if(!docSnap.exists()){
      await setDoc(userRef,{paid:false,timestamp:serverTimestamp()});
      localStorage.setItem("lolfundamentals_paid","false");
      planModal.style.display="flex";
    } else {
      const paid = docSnap.data().paid;
      localStorage.setItem("lolfundamentals_paid",paid);
      paid ? window.location.href="membershub.html" : planModal.style.display="flex";
    }
    localStorage.setItem("lolfundamentals_logged_in","true");
    loginModal.style.display="none";
  } catch(err){ loginMsgModal.textContent=err.message; }
};

// Reset password
resetLinkModal.onclick = async (e) => {
  e.preventDefault();
  const email = loginEmail.value.trim();
  if(!email){ loginMsgModal.textContent="Enter email to reset"; return; }
  try {
    await sendPasswordResetEmail(auth,email);
    loginMsgModal.textContent="Password reset email sent!";
  } catch(err){ loginMsgModal.textContent=err.message; }
};

// Auto redirect if already logged in and paid
if(localStorage.getItem("lolfundamentals_logged_in")==="true" && localStorage.getItem("lolfundamentals_paid")==="true"){
  window.location.href="membershub.html";
}

// Particle effect
for(let i=0;i<50;i++){
  const span = document.createElement("span");
  span.style.left = Math.random()*100+"%";
  span.style.top = Math.random()*100+"%";
  span.style.animationDuration = 4 + 4*Math.random() + "s";
  span.style.animationDelay = 4*Math.random() + "s";
  document.querySelector(".particles").appendChild(span);
}
</script>
</body>
</html>


























