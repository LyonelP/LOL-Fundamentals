<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LoL Fundamentals ‚Äì Free Skills</title>

<style>
body{
  margin:0;
  font-family:"Beaufort for LOL",Arial,Helvetica,sans-serif;
  background:#0a0f14;
  color:#e6edf3;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  background:#0d1117;
  border-bottom:2px solid #c9aa71;
  padding:18px;
  text-align:center;
  font-size:24px;
  font-weight:bold;
  text-transform:uppercase;
  color:#c9aa71;
}
main{ flex:1; }

.back{
  display:block;
  width:max-content;
  margin:20px auto;
  padding:10px 18px;
  background:#c9aa71;
  color:#000;
  text-decoration:none;
  border-radius:8px;
  font-weight:bold;
}

.section-select{
  text-align:center;
  margin:10px 0;
}
select{
  padding:8px 12px;
  border-radius:6px;
  background:#161b22;
  color:#c9aa71;
  border:none;
}

.progress-wrap{
  width:260px;
  margin:15px auto;
  text-align:center;
}
.progress-bar{
  height:10px;
  background:#161b22;
  border-radius:20px;
  overflow:hidden;
}
.progress-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#c9aa71,#f2d58c);
  transition:.3s;
}

.skill-list{
  list-style:none;
  padding:0;
  margin:20px auto 40px;
}
.skill-list li{
  width:90%;
  max-width:900px;
  margin:0 auto 14px;
  background:#161b22;
  border:2px solid #c9aa71;
  border-radius:12px;
  padding:14px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.skill-list a{
  color:#fff;
  text-decoration:none;
  position:relative;
}
.skill-list a.locked::after{
  content:"üîí";
  margin-left:10px;
  color:#c9aa71;
}

.check{
  width:26px;
  height:26px;
  border-radius:50%;
  border:2px solid #c9aa71;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  color:#c9aa71;
}
.check.done{
  background:#c9aa71;
  color:#000;
}

footer{
  text-align:center;
  padding:18px;
  font-size:14px;
  color:#8b949e;
  border-top:1px solid #1f2937;
}

/* ---------- MODALS ---------- */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  z-index:9999;
  justify-content:center;
  align-items:center;
}
.modalContent{
  background:#161b22;
  padding:28px;
  border-radius:10px;
  text-align:center;
  width:90%;
  max-width:400px;
  border:1px solid #c9aa71;
}
.modalContent h2{ color:#c9aa71; }
.modalContent input{
  width:85%;
  padding:8px;
  margin:8px auto;
  border:none;
  border-radius:4px;
}
.btn{
  display:inline-block;
  background:#2f81f7;
  color:#fff;
  padding:10px 20px;
  border-radius:6px;
  border:none;
  cursor:pointer;
  font-weight:bold;
  margin:6px;
}
.orange{ background:#f2994a; }
.linkBtn{
  background:none;
  border:none;
  color:#c9aa71;
  cursor:pointer;
  margin-top:12px;
}
</style>
</head>

<body>

<header>LoL Fundamentals ‚Äì Free Skills</header>

<main>
<a class="back" href="index.html">‚Üê Back to Hub</a>

<div class="section-select">
  <select id="sectionSelect"></select>
</div>

<div class="progress-wrap">
  <div id="progressLabel">0% Complete</div>
  <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
</div>

<ul id="skillList" class="skill-list"></ul>
</main>

<footer>¬© 2025 LoL Fundamentals</footer>

<!-- SIGNUP MODAL -->
<div id="signupModal" class="modal">
<div class="modalContent">
<h2>Sign Up</h2>
<input id="signupEmail" type="email" placeholder="Email">
<input id="signupPass" type="password" placeholder="Password">
<input id="signupPass2" type="password" placeholder="Confirm Password">
<button class="btn" id="signupBtn">Continue</button>
<button class="linkBtn" onclick="closeAll()">Cancel</button>
</div>
</div>

<!-- PLAN MODAL -->
<div id="planModal" class="modal">
<div class="modalContent">
<h2>Unlock All Fundamentals</h2>
<button class="btn" id="monthlyBtn">$8.99 / Month</button>
<button class="btn orange" id="yearlyBtn">$49 / Year</button>
<button class="linkBtn" onclick="closeAll()">Cancel</button>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* üî• YOUR FIREBASE */
const firebaseConfig={
  apiKey:"AIzaSyCFRcEV7wdivqONnkjJubAZOjPMixrHMBI",
  authDomain:"lol-fundamentals.firebaseapp.com",
  projectId:"lol-fundamentals",
  storageBucket:"lol-fundamentals.firebasestorage.app",
  messagingSenderId:"1038440427584",
  appId:"1:1038440427584:web:a82207151fd370dbedefa5"
};
const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

/* üí≥ YOUR STRIPE LINKS */
const STRIPE_MONTHLY="https://buy.stripe.com/8x28wIaQ4dJa4Rg88iejK0f";
const STRIPE_YEARLY="https://buy.stripe.com/cNi14g3nC48AerQ9cmejK07";

/* ---------- SKILLS ---------- */
const skills={
 "Pre Game":["Champion Select","Mouse Accuracy","Summoner Spells","Matchups","Communication","Build"],
 "Early Game":["Level 1","Farming","Trading","Wave Control","Back Timings"],
 "Mid Game":["Teamwork","Vision","Rotations"],
 "Late Game":["Target Selection","Win Conditions"],
 "Advanced":["Positioning","Kiting"]
};

let progress=JSON.parse(localStorage.getItem("freeSkillProgress")||"{}");

Object.keys(skills).forEach(s=>{
  progress[s]=progress[s]||{};
  skills[s].forEach(k=>{
    if(progress[s][k]===undefined) progress[s][k]=false;
  });
});

const list=document.getElementById("skillList");
const select=document.getElementById("sectionSelect");
const fill=document.getElementById("progressFill");
const label=document.getElementById("progressLabel");

Object.keys(skills).forEach(s=>{
  const o=document.createElement("option");
  o.textContent=s;
  select.appendChild(o);
});

function update(sec){
  const total=Object.keys(progress[sec]).length;
  const done=Object.values(progress[sec]).filter(v=>v).length;
  const pct=Math.round(done/total*100);
  fill.style.width=pct+"%";
  label.textContent=`${pct}% Complete`;
}

function render(sec){
  list.innerHTML="";
  skills[sec].forEach(skill=>{
    const unlocked=skill==="Champion Select";
    const li=document.createElement("li");

    const a=document.createElement("a");
    a.textContent=skill;
    if(!unlocked){
      a.classList.add("locked");
      a.onclick=()=>openSignup();
    }

    const c=document.createElement("div");
    c.className="check"+(progress[sec][skill]?" done":"");
    c.innerHTML=progress[sec][skill]?"‚úî":"";
    if(unlocked){
      c.onclick=()=>{
        progress[sec][skill]=!progress[sec][skill];
        localStorage.setItem("freeSkillProgress",JSON.stringify(progress));
        render(sec);
      };
    }

    li.appendChild(a);
    li.appendChild(c);
    list.appendChild(li);
  });
  update(sec);
}

select.onchange=()=>render(select.value);
render(select.value);

/* ---------- MODALS ---------- */
function openSignup(){ signupModal.style.display="flex"; }
function closeAll(){
  signupModal.style.display="none";
  planModal.style.display="none";
}

signupBtn.onclick=async()=>{
  const e=signupEmail.value,p=signupPass.value,p2=signupPass2.value;
  if(!e||!p||p!==p2){ alert("Check your details"); return; }
  await createUserWithEmailAndPassword(auth,e,p);
  await setDoc(doc(db,"paidUsers",e),{paid:false,created:serverTimestamp()});
  signupModal.style.display="none";
  planModal.style.display="flex";
};

monthlyBtn.onclick=()=>window.open(STRIPE_MONTHLY,"_blank");
yearlyBtn.onclick=()=>window.open(STRIPE_YEARLY,"_blank");
</script>

</body>
</html>


